openapi: 3.1.0
info:
  title: HydraFlow API
  description: |
    HydraFlow is a custom GPT persona that autonomously manages context, creates task-specific sub-personas (heads), compresses memory, and summarizes logs. 
    It adapts to handle long, complex conversations dynamically and modularly.
  version: 1.0.0

servers:
  - url: https://your-domain.app/api
    description: Main server for HydraFlow actions.

paths:
  /compress-memory:
    post:
      operationId: compressMemory
      summary: Compress conversation memory
      description: Summarizes and compresses long conversation memory to maintain efficiency.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                memory:
                  type: string
                  description: The full conversation memory to compress.
              required:
                - memory
      responses:
        '200':
          description: Compressed memory summary.
          content:
            application/json:
              schema:
                type: object
                properties:
                  compressedMemory:
                    type: string
                    description: The summarized and compressed conversation memory.

  /context-recap:
    post:
      operationId: contextRecap
      summary: Recap context and memory
      description: Provides a concise summary of the current conversation history and compressed memory.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                history:
                  type: string
                  description: The full conversation history.
                compressedMemory:
                  type: string
                  description: The compressed version of the conversation memory.
              required:
                - history
                - compressedMemory
      responses:
        '200':
          description: Context recap summary.
          content:
            application/json:
              schema:
                type: object
                properties:
                  recap:
                    type: string
                    description: A concise summary of the conversation context.

  /create-subpersona:
    post:
      operationId: createSubpersona
      summary: Create a specialized sub-persona (head)
      description: Dynamically creates a sub-persona (head) for a specific task.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                task:
                  type: string
                  description: The specific task the sub-persona will handle.
                description:
                  type: string
                  description: A description of the sub-persona's task.
              required:
                - task
                - description
      responses:
        '200':
          description: Successfully created a sub-persona.
          content:
            application/json:
              schema:
                type: object
                properties:
                  subPersonaName:
                    type: string
                    description: The name of the newly created sub-persona.
                  status:
                    type: string
                    description: The status of the sub-persona.

  /parse-query:
    post:
      operationId: parseQuery
      summary: Parse user query for actionable items
      description: Extracts keywords and identifies actions required to handle the query.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                query:
                  type: string
                  description: The user query or input to parse.
              required:
                - query
      responses:
        '200':
          description: Successfully parsed query.
          content:
            application/json:
              schema:
                type: object
                properties:
                  keywords:
                    type: array
                    items:
                      type: string
                    description: Keywords extracted from the query.
                  actionItems:
                    type: array
                    items:
                      type: string
                    description: Action items identified from the query.

  /summarize-logs:
    post:
      operationId: summarizeLogs
      summary: Summarize logs for analysis
      description: Analyzes and summarizes logs to identify key patterns and errors.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                logs:
                  type: string
                  description: Raw log data to analyze and summarize.
              required:
                - logs
      responses:
        '200':
          description: Successfully summarized logs.
          content:
            application/json:
              schema:
                type: object
                properties:
                  summaryReport:
                    type: string
                    description: A summarized report of the log data.

components:
  schemas:
    CompressedMemory:
      type: object
      properties:
        compressedMemory:
          type: string
          description: The compressed conversation memory.

    SubPersona:
      type: object
      properties:
        subPersonaName:
          type: string
          description: The name of the created sub-persona.
        status:
          type: string
          description: The status of the sub-persona.

    ParsedQuery:
      type: object
      properties:
        keywords:
          type: array
          items:
            type: string
          description: Keywords extracted from the query.
        actionItems:
          type: array
          items:
            type: string
          description: Action items identified from the query.

    LogsSummary:
      type: object
      properties:
        summaryReport:
          type: string
          description: The summarized analysis of logs.

    ContextRecap:
      type: object
      properties:
        recap:
          type: string
          description: A concise summary of context and memory.
